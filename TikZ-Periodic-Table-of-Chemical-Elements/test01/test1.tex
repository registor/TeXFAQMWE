% https://tex.stackexchange.com/questions/233417/periodic-table-with-electron-counts-in-shells
\documentclass[tikz,border=9]{standalone}

\usepackage[fontset=windows]{ctex}

% 生成数据文件
\usepackage{filecontents}
\begin{filecontents*}{elements.txt}
1       H       氢    1.008   3, 6
2       He      氦    4.002602(2)     1, 2
3       Li      锂    6.94    3, 6
4       Be      铍    9.0121831(5)
5       B       硼    10.81   3, 6
6       C       碳    12.011  6
7       N       氮    14.007  6
8       O       氧    15.999  6
9       F       氟    18.998403163(6)
10      Ne      氖    20.1797(6)      1, 3
11      Na      钠    22.98976928(2)    
12      Mg      镁    24.305  6
13      Al      铝    26.9815385(7)
14      Si      硅    28.085  6
15      P       磷    30.973761998(5)
16      S       硫    32.06   6
17      Cl      氯    35.45   3, 6
18      Ar      氩    39.948(1)       1, 2
19      K       钾    39.0983(1)     
20      Ca      钙    40.078(4)      
21      Sc      钪    44.955908(5)
22      Ti      钛    47.867(1)
23      V       钒    50.9415(1)
24      Cr      铬    51.9961(6)
25      Mn      锰    54.938044(3)
26      Fe      铁    55.845(2)
27      Co      钴    58.933194(4)
28      Ni      镍    58.6934(4)      2
29      Cu      铜    63.546(3)       2
30      Zn      锌    65.38(2)        2
31      Ga      镓    69.723(1)
32      Ge      锗    72.630(8)
33      As      砷    74.921595(6)
34      Se      硒    78.971(8)
35      Br      溴    79.904  6
36      Kr      氪    83.798(2)       1, 3
37      Rb      铷    85.4678(3)      1
38      Sr      锶    87.62(1)        1, 2
39      Y       钇    88.90584(2)
40      Zr      锆    91.224(2)       1
41      Nb      锆    92.90637(2)
42      Mo      钼    95.95(1)        1
43      Tc      锝    97      4
44      Ru      钌    101.07(2)       1
45      Rh      铑    102.90550(2)
46      Pd      钯    106.42(1)       1
47      Ag      银    107.8682(2)     1
48      Cd      镉    112.414(4)      1
49      In      铟    114.818(1)
50      Sn      锡    118.710(7)      1
51      Sb      锑    121.760(1)      1
52      Te      碲    127.60(3)       1
53      I       碘    126.90447(3)
54      Xe      氙    131.293(6)      1, 3
55      Cs      铯    132.90545196(6)
56      Ba      钡    137.327(7)
57      La      镧    138.90547(7)    1
58      Ce      铈    140.116(1)      1
59      Pr      镨    140.90766(2)
60      Nd      钕    144.242(3)      1
61      Pm      钷    145     5
62      Sm      钐    150.36(2)       1
63      Eu      铕    151.964(1)      1
64      Gd      钆    157.25(3)       1
65      Tb      铽    158.92535(2)
66      Dy      镝    162.500(1)      1
67      Ho      钬    164.93033(2)
68      Er      铒    167.259(3)      1
69      Tm      铥    168.93422(2)
70      Yb      镱    173.054(5)      1
71      Lu      镥    174.9668(1)     1
72      Hf      铪    178.49(2)
73      Ta      钽    180.94788(2)
74      W       钨    183.84(1)
75      Re      铼    186.207(1)
76      Os      锇    190.23(3)       1
77      Ir      铱    192.217(3)
78      Pt      铂    195.084(9)
79      Au      金    196.966569(5)
80      Hg      汞    200.592(3)
81      Tl      铊    204.38  6
82      Pb      铅    207.2(1)        1, 2
83      Bi      铋    208.98040(1)
84      Po      钋    209     4
85      At      砹    210     4
86      Rn      氡    222     4
87      Fr      钫    223     4
88      Ra      镭    226     4
89      Ac      锕    227     4
90      Th      钍    232.0377(4)     1, 4
91      Pa      镤    231.03588(2)    4
92      U       铀    238.02891(3)    1, 3, 4
93      Np      镎    237     4
94      Pu      钚    244     4
95      Am      镅    243     4
96      Cm      锔    247     4
97      Bk      锫    247     4
98      Cf      锎    251     4
99      Es      锿    252     4
100     Fm      镄    257     4
101     Md      钔    258     4
102     No      锘    259     4
103     Lr      铹    262     4
104     Rf      𬬻    267     4
105     Db      𬭊    270     4
106     Sg      𬭳    271     4
107     Bh      𬭛    270     4
108     Hs      𬭶    277     4
109     Mt      鿏    276     4
110     Ds      𫟼    281     4
111     Rg      𬬭    282     4
112     Cn      鎶    285     4
113     Uut     Uut   285     4, 5
114     Fl      鈇    289     4, 5
115     Uup     Uup   289     4, 5
116     Lv      Lv    293     4, 5
117     Uus     Uus   294     4, 5
118     Uuo     Uuo   294     4, 5  
\end{filecontents*}  

\begin{document}
% Draw the Contour of Groups
\def\DrawGroup;{
    \draw[rounded corners=10pt,fill=red!10   ](15in,0)|-+(-1in,1in)|-+(1in,-6in)|-cycle;
    \draw[rounded corners=10pt,fill=yellow!50](17in,-2in)rectangle+(10in,-4in);
    \draw[rounded corners=10pt,fill=green!10 ](17in,-7in)rectangle+(14in,-2in);
    \draw[rounded corners=10pt,fill=blue!10  ](33in,-0in)-|+(-5in,-6in)-|+(1in,1in)-|cycle;
    \clip[rounded corners=10pt]               (15in,0)|-+(-1in,1in)|-+(1in,-6in)|-cycle
                                              (17in,-2in)rectangle+(10in,-4in)
                                              (17in,-7in)rectangle+(14in,-2in)
                                              (33in,-0in)-|+(-5in,-6in)-|+(1in,1in)-|cycle;
}

% Atomic Number \PNn => Coordinate (\PNx,\PNy)
\def\PositionByNumber;{
    \pgfmathtruncatemacro\PNn{\n}
    \foreach\PNa/\PNb in{1/30,34/24,66/24,98/14,130/14}{
        \ifnum\PNn>\PNa
            \pgfmathtruncatemacro\PNn{\PNn+\PNb}\xdef\PNn{\PNn}
        \fi
    }
}

% Coordinate (\PNx,\PNy) => Move and Group
\def\GroupByPosition;{
    \pgfmathtruncatemacro\PNx{mod(\PNn-.5,32)+.5}
    \pgfmathtruncatemacro\PNy{(\PNn-\PNx)/32}
    \ifnum\PNx>2\ifnum\PNx<17
        \pgfmathtruncatemacro\PNy{\PNy+3}
        \pgfmathtruncatemacro\PNx{\PNx+14}
    \fi\fi
    \ifnum\PNx<3
        \pgfmathtruncatemacro\PNx{\PNx+13}
    \fi
    \ifnum\PNx>26\ifnum\PNy<8
        \pgfmathtruncatemacro\PNx{\PNx+1}
    \fi\fi
    \pgftransformreset;\pgftransformxshift{\PNx in};\pgftransformyshift{-\PNy in};
}

% Atomic Number \APn => Electron Configuration \APe1 \APe2 \APe3 ...
\def\AufbauPrinciple;{
    \pgfmathtruncatemacro\APn{\n}
    \xdef\APi{0}
    \foreach\APa in{2,2,6,2,6,2,10,6,2,10,6,2,14,10,6,2,14,10,6,2}{
        \pgfmathtruncatemacro\APi{\APi+1}\xdef\APi{\APi}
        \ifnum\APn>\APa
            \expandafter\xdef\csname APe\APi\endcsname{$\bullet$}
            \pgfmathtruncatemacro\APn{\APn-\APa}\xdef\APn{\APn}
        \else\ifnum\APn>0
            \expandafter\xdef\csname APe\APi\endcsname{\APn}
            \pgfmathtruncatemacro\APn{\APn-\APn}\xdef\APn{\APn}
        \else
            \expandafter\xdef\csname APe\APi\endcsname{}
        \fi\fi
    }
}

% Print the Configuration 
\def\DrawConfiguration;{
    \xdef\DCi{0}
    \foreach\DCa/\DCb in{1/1,1/2,2/2,1/3,2/3,1/4,3/3,2/4,1/5,3/4,2/5,1/6,4/4,3/5,2/6,1/7,4/5,3/6,2/7,1/8}{
        \pgfmathtruncatemacro\DCi{\DCi+1}\xdef\DCi{\DCi}
        \path[scale=.2](\DCa,\DCb)node{\csname APe\DCi\endcsname};
    }
}

\newread\linereader
\def\foreachline#1#2{\openin\linereader=#1\nextline#2}
\def\nextline#1{\read\linereader to \line\ifeof\linereader\closein\linereader\else\expandafter#1\line\end\expandafter\nextline\expandafter#1\fi}
\def\element#1 #2 #3 #4 #5\end{
    \xdef\n{#1}
    \PositionByNumber;
    \GroupByPosition;
    \draw[black](0,0)rectangle(1in,1in)
        (0,1in)node[below right]{#1}(1in,1in)node[below left]{#4}(.5in,.5in)node{\Large #2}(.5in,.1in)node{#3};
    \AufbauPrinciple;
    \DrawConfiguration;
    \message{[\n]}
}

\small
\begin{tikzpicture}
    \DrawGroup;
    \foreachline{elements.txt}\element
\end{tikzpicture}
\end{document}
%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:
